require=function t(e,n,i){function a(o,r){if(!n[o]){if(!e[o]){var s="function"==typeof require&&require;if(!r&&s)return s(o,!0);if(c)return c(o,!0);var h=new Error("Cannot find module '"+o+"'");throw h.code="MODULE_NOT_FOUND",h}var l=n[o]={exports:{}};e[o][0].call(l.exports,function(t){var n=e[o][1][t];return a(n?n:t)},l,l.exports,t,e,n,i)}return n[o].exports}for(var c="function"==typeof require&&require,o=0;o<i.length;o++)a(i[o]);return a}({"01StartMenu":[function(t,e,n){"use strict";cc._RFpush(e,"280c3rsZJJKnZ9RqbALVwtK","01StartMenu"),cc.Class({"extends":cc.Component,properties:{label:{"default":null,type:cc.Label},buttonStartGame:{"default":null,type:cc.Button},buttonImprint:{"default":null,type:cc.Button},buttonManual:{"default":null,type:cc.Button},text:"Hello, World!"},onLoad:function(){this.changeScene=t("ChangeSceneScript"),this.changeScene.fadeIn(cc.director)},update:function(t){},startGame:function(){this.changeScene.loadScene(cc.director,"02characterSelect")},openImprint:function(){this.node.getChildByName("Imprint").runAction(cc.moveTo(.3,0,0))},closeImprint:function(){this.node.getChildByName("Imprint").runAction(cc.moveTo(.3,0,-700))},openManual:function(){cc.sys.localStorage={selectedCharacter:1,characterHealth:500,currentHealth:500,characterStrength:20,characterExperience:0,characterLevel:1,characterAttackRadius:50,stage:10},this.changeScene.loadScene(cc.director,"Tutorial")}}),cc._RFpop()},{ChangeSceneScript:"ChangeSceneScript"}],"02CharacterSelect":[function(t,e,n){"use strict";cc._RFpush(e,"9571eEJ2D1OOrThdroyivwk","02CharacterSelect"),cc.Class({"extends":cc.Component,properties:{character1:{"default":null,type:cc.Node},character2:{"default":null,type:cc.Node},character3:{"default":null,type:cc.Node},backToMenu:{"default":null,type:cc.Button},startGame:{"default":null,type:cc.Button},character1animation:{"default":null,type:cc.Animation},character2animation:{"default":null,type:cc.Animation},character3animation:{"default":null,type:cc.Animation}},onLoad:function(){this.changeScene=t("ChangeSceneScript"),this.changeScene.fadeIn(cc.director)},character1Select:function(){this.character1animation.play("selectAnim_Cowboy"),this.character1.getChildByName("Stats").opacity=255,this.character2.getChildByName("Stats").opacity=0,this.character3.getChildByName("Stats").opacity=0,cc.sys.localStorage={selectedCharacter:1,characterHealth:100,currentHealth:100,characterStrength:20,characterExperience:0,characterLevel:1,characterAttackRadius:50,stage:1}},character2Select:function(){this.character2animation.play("selectAnim_Knight"),this.character1.getChildByName("Stats").opacity=0,this.character2.getChildByName("Stats").opacity=255,this.character3.getChildByName("Stats").opacity=0,cc.sys.localStorage={selectedCharacter:2,characterHealth:200,currentHealth:200,characterStrength:30,characterExperience:0,characterLevel:1,characterAttackRadius:120,stage:1}},character3Select:function(){this.character3animation.play("selectAnim_Ninja"),this.character1.getChildByName("Stats").opacity=0,this.character2.getChildByName("Stats").opacity=0,this.character3.getChildByName("Stats").opacity=255,cc.sys.localStorage={selectedCharacter:3,characterHealth:50,currentHealth:50,characterStrength:15,characterExperience:0,characterLevel:1,characterAttackRadius:90,stage:1}},goBackToMenu:function(){this.changeScene.loadScene(cc.director,"01startMenu")},goToGame:function(){this.changeScene.loadScene(cc.director,"Stages/stage01")}}),cc._RFpop()},{ChangeSceneScript:"ChangeSceneScript"}],AnimationKnightScript:[function(t,e,n){"use strict";cc._RFpush(e,"5cf85sHaPBJLIYt5NiRsrKq","AnimationKnightScript"),cc.Class({"extends":cc.Component,properties:{parent:{"default":null,type:cc.Node}},onLoad:function(){this.parent.getComponent("KnightScript")},returnToStandardMode:function(){cc.log("DO IT!!"),this.parent.getComponent("KnightScript").punch=!1,this.parent.getComponent("KnightScript").shoot=!1,this.parent.getComponent("KnightScript").playAnimation()}}),cc._RFpop()},{}],AnimationNinjaScript:[function(t,e,n){"use strict";cc._RFpush(e,"eb778yNMPNGAYlUyhRq959H","AnimationNinjaScript"),cc.Class({"extends":cc.Component,properties:{parent:{"default":null,type:cc.Node}},onLoad:function(){this.parent.getComponent("NinjaScript")},returnToStandardMode:function(){cc.log("DO IT!!"),this.parent.getComponent("NinjaScript").punch=!1,this.parent.getComponent("NinjaScript").shoot=!1,this.parent.getComponent("NinjaScript").playAnimation()}}),cc._RFpop()},{}],AnimationScript:[function(t,e,n){"use strict";cc._RFpush(e,"e9485VgsSZAjbT4QETx9iS8","AnimationScript"),cc.Class({"extends":cc.Component,properties:{parent:{"default":null,type:cc.Node},stepAudio:{"default":null,url:cc.AudioClip},punchAudio:{"default":null,url:cc.AudioClip},shootAudio:{"default":null,url:cc.AudioClip}},onLoad:function(){this.parent.getComponent("PlayerScript")},returnToStandardMode:function(){this.parent.getComponent("PlayerScript").punch=!1,this.parent.getComponent("PlayerScript").shoot=!1,this.parent.getComponent("PlayerScript").playAnimation()},triggerAttackFromAnimation:function(){this.parent.getComponent("PlayerScript").forwardAttackToStage()},triggerBullet:function(){this.parent.getComponent("PlayerScript").forwardBulletAttackToStage()},playFootstepSound:function(){cc.audioEngine.playEffect(this.stepAudio,!1)},playPunchSound:function(){cc.audioEngine.playEffect(this.punchAudio,!1)},playShootSound:function(){cc.audioEngine.playEffect(this.shootAudio,!1)}}),cc._RFpop()},{}],BackgroundScript:[function(t,e,n){"use strict";cc._RFpush(e,"439067xHFFIbZjLRSe6p/vI","BackgroundScript"),cc.Class({"extends":cc.Component,properties:{secondBackground:{"default":null,type:cc.Node},firstBackground:{"default":null,type:cc.Node},floor:{"default":null,type:cc.Node},rainAnimation:{"default":null,type:cc.Animation}},onLoad:function(){this.rainAnimation&&this.rainAnimation.play("rainAnim")},moveBackgroundChildren:function(t,e,n){var i=this.node.getChildByName("Floor"),a=this.node.getChildByName("FirstBackground"),c=this.node.getChildByName("SecondBackground");this.moveSprites(i.getChildByName("FloorSprite1"),i.getChildByName("FloorSprite2"),t,e,n),this.moveSprites(a.getChildByName("FirstBackgroundSprite1"),a.getChildByName("FirstBackgroundSprite2"),t/2,e,n),this.moveSprites(c.getChildByName("SecondBackgroundSprite1"),c.getChildByName("SecondBackgroundSprite2"),t/20,e,n)},moveSprites:function(t,e,n,i,a){t.x=t.x+n*a*i,e.x=e.x+n*a*i;var c=t.getBoundingBox().size.width,o=e.getBoundingBox().size.width;t.x<-c&&(t.x+=2*c),e.x<-o&&(e.x+=2*o),t.x>c?t.x-=2*c:e.x>o&&(e.x-=2*o)}}),cc._RFpop()},{}],BossAnimationScript:[function(t,e,n){"use strict";cc._RFpush(e,"a0ef4miVv5Hupnwq0QQ/S49","BossAnimationScript"),cc.Class({"extends":cc.Component,properties:{},onLoad:function(){}}),cc._RFpop()},{}],BossScript:[function(t,e,n){"use strict";cc._RFpush(e,"2ee8ddeCWBIFpf68O2HJvGJ","BossScript"),cc.Class({"extends":cc.Component,properties:{attackRadius:0,xSpeed:0,ySpeed:0,animation:{"default":null,type:cc.Animation},strength:0,health:0,enemyType:"dummy"},onLoad:function(){}}),cc._RFpop()},{}],ChangeSceneScript:[function(t,e,n){"use strict";cc._RFpush(e,"65bd2153HNE462KrhHUV/bV","ChangeSceneScript"),e.exports.loadScene=function(t,e){var n=t.getScene().getChildByName("Canvas");n.getChildByName("Fade").zIndex=4e3,n.getChildByName("Fade").runAction(cc.sequence(cc.fadeIn(1),cc.callFunc(function(){return t.loadScene(e)})))},e.exports.fadeIn=function(t){var e=t.getScene().getChildByName("Canvas");e.getChildByName("Fade").zIndex=4e3,e.getChildByName("Fade").runAction(cc.fadeOut(1))},cc._RFpop()},{}],CharacterSelectAnimationScript:[function(t,e,n){"use strict";cc._RFpush(e,"affbdsfSmdEGLdTyrOFqsB5","CharacterSelectAnimationScript"),cc.Class({"extends":cc.Component,properties:{animation:{"default":null,type:cc.Animation}},onLoad:function(){}}),cc._RFpop()},{}],EnemyAnimationScript:[function(t,e,n){"use strict";cc._RFpush(e,"91258aRkStMNKIdC18bjsS+","EnemyAnimationScript"),cc.Class({"extends":cc.Component,properties:{stepAudio:{"default":null,url:cc.AudioClip},punchAudio:{"default":null,url:cc.AudioClip}},onLoad:function(){},playFootstepSound:function(){cc.audioEngine.playEffect(this.stepAudio,!1)},playPunchSound:function(){cc.audioEngine.playEffect(this.punchAudio,!1)}}),cc._RFpop()},{}],EnemyScript:[function(t,e,n){"use strict";cc._RFpush(e,"930928NwAhILqGlYjjAFt//","EnemyScript"),cc.Class({"extends":cc.Component,properties:{attackRadius:0,xSpeed:0,ySpeed:0,animation:{"default":null,type:cc.Animation},strength:0,health:0,enemyType:"dummy"},onLoad:function(){this.left=!0,this.isStanding=!1,this.isDead=!1,this.tumbleUntilTime=0,this.isTumbling=!1,this.animation.play("enemyRunLeftAnim_"+this.enemyType)},getPlayerDistance:function(){var t=this.game.player.getPosition(),e=cc.pDistance(this.node.position,t);return e},attack:function(){var t=this;this.getPlayerDistance()<this.attackRadius&&(this.isStanding=!0,this.animation.play("enemyPunchAnim_"+this.enemyType),this.node.runAction(cc.sequence(cc.delayTime(.5),cc.callFunc(function(){t.getPlayerDistance()<t.attackRadius&&(t.game.currentHealth-=t.strength,t.game.player.x>t.node.x?t.game.player.runAction(cc.moveBy(.1,100,0)):t.game.player.runAction(cc.moveBy(.1,-100,0))),t.isStanding=!1}))))},moveEnemy:function(t){var e=this.game.player.getPositionX(),n=this.game.player.getPositionY(),i=this.node.x,a=this.node.y;a<=n?this.node.y+=this.ySpeed*t:this.node.y-=this.ySpeed*t,i<=e?(this.node.x+=this.xSpeed*t,this.left=!1):(this.node.x-=this.xSpeed*t,this.left=!0);var c=String(this.animation.currentClip.name);c.contains?this.left&&!c.contains("enemyRunLeftAnim")?this.animation.play("enemyRunLeftAnim_"+this.enemyType):this.left||c.contains("enemyRunRightAnim")||this.animation.play("enemyRunRightAnim_"+this.enemyType):this.left&&!c.includes("enemyRunLeftAnim")?this.animation.play("enemyRunLeftAnim_"+this.enemyType):this.left||c.includes("enemyRunRightAnim")||this.animation.play("enemyRunRightAnim_"+this.enemyType)},checkPlayerAttack:function(){},tumble:function(){this.isTumbling||(this.animation.play("enemyTumbleAnim_"+this.enemyType),this.isTumbling=!0)},update:function(t){this.tumbleUntilTime<(new Date).getTime()?(this.isStanding||this.isDead||this.attack(),this.isStanding||this.isDead||this.moveEnemy(t),this.health<=0&&(this.isDead=!0,this.enemyDie()),this.isTumbling=!1):this.tumble(),this.checkPlayerAttack()},enemyDie:function(){var t=this;this.animation.currentClip.name.contains?String(this.animation.currentClip.name).contains("enemyDie")||this.node.runAction(cc.sequence(cc.callFunc(function(){return t.animation.play("enemyDieAnim_"+t.enemyType)}),cc.delayTime(3),cc.callFunc(function(){return t.node.destroy()}))):String(this.animation.currentClip.name).includes("enemyDie")||this.node.runAction(cc.sequence(cc.callFunc(function(){return t.animation.play("enemyDieAnim_"+t.enemyType)}),cc.delayTime(.5),cc.callFunc(function(){return t.node.destroy()})))}}),cc._RFpop()},{}],KnightScript:[function(t,e,n){"use strict";cc._RFpush(e,"ddea17Sh+NOjqoffhtEznpe","KnightScript"),cc.Class({"extends":cc.Component,properties:{playerTempo:0,animation:{"default":null,type:cc.Animation}},onLoad:function(){this.animation.play("standStillAnim_Knight"),this.moveBackground=0,this.left=!1,this.right=!1,this.up=!1,this.down=!1,this.punch=!1,this.shoot=!1,this.setInputControl(),this.playerDirection=1},setInputControl:function(){var t=this;cc.eventManager.addListener({event:cc.EventListener.KEYBOARD,onKeyPressed:function(e,n){if(0==t.punch&&0==t.shoot)switch(e){case cc.KEY.left:t.moveBackground=0,t.right=!1,0==t.left&&(t.left=!0,t.playAnimation());break;case cc.KEY.right:t.moveBackground=0,t.left=!1,0==t.right&&(t.right=!0,t.playAnimation());break;case cc.KEY.up:0==t.up&&(t.up=!0,t.playAnimation());break;case cc.KEY.down:0==t.down&&(t.down=!0,t.playAnimation());break;case cc.KEY.space:cc.log("space"),this.punch=!0,t.playPunchAnimation();break;case cc.KEY.x:cc.log("x"),this.shoot=!0,t.playShootAnimation()}},onKeyReleased:function(e,n){switch(e){case cc.KEY.left:t.left=!1,t.moveBackground=0,t.playAnimation();break;case cc.KEY.right:t.right=!1,t.moveBackground=0,t.playAnimation();break;case cc.KEY.up:t.up=!1,t.playAnimation();break;case cc.KEY.down:t.down=!1,t.playAnimation();break;case cc.KEY.space:cc.log("space up")}}},t.node)},playAnimation:function(){this.playerDirection=this.node.getChildByName("KnightAnimation").scaleX,this.left?this.animation.play("runLeftAnim_Knight"):this.right?this.animation.play("runRightAnim_Knight"):this.playerDirection==-1&&(this.up||this.down)?this.animation.play("runLeftAnim_Knight"):1==this.playerDirection&&(this.up||this.down)?this.animation.play("runRightAnim_Knight"):this.animation.play("standStillAnim_Knight")},playPunchAnimation:function(){this.animation.play("punchAnim_Knight")},playShootAnimation:function(){this.animation.play("shootAnim_Knight")},update:function(t){1==this.left?this.node.x>-400?this.node.x=this.node.x-this.playerTempo*t:this.moveBackground=1:1==this.right&&(this.node.x<400?this.node.x=this.node.x+this.playerTempo*t:this.moveBackground=-1),1==this.up&&this.node.y<-80?this.node.y=this.node.y+this.playerTempo/2*t:1==this.down&&this.node.y>-250&&(this.node.y=this.node.y-this.playerTempo/2*t)},doOtherStuff:function(){cc.log("JUST DO IT!")}}),cc._RFpop()},{}],NinjaScript:[function(t,e,n){"use strict";cc._RFpush(e,"9098eSxS+FD8a/uOJqlEeNS","NinjaScript"),cc.Class({"extends":cc.Component,properties:{playerTempo:0,animation:{"default":null,type:cc.Animation},animationShuriken:{"default":null,type:cc.Animation}},onLoad:function(){this.animation.play("standStillAnim_Ninja"),this.moveBackground=0,this.left=!1,this.right=!1,this.up=!1,this.down=!1,this.punch=!1,this.shoot=!1,this.setInputControl(),this.playerDirection=1},setInputControl:function(){var t=this;cc.eventManager.addListener({event:cc.EventListener.KEYBOARD,onKeyPressed:function(e,n){if(0==t.punch&&0==t.shoot)switch(e){case cc.KEY.left:t.moveBackground=0,t.right=!1,0==t.left&&(t.left=!0,t.playAnimation());break;case cc.KEY.right:t.moveBackground=0,t.left=!1,0==t.right&&(t.right=!0,t.playAnimation());break;case cc.KEY.up:0==t.up&&(t.up=!0,t.playAnimation());break;case cc.KEY.down:0==t.down&&(t.down=!0,t.playAnimation());break;case cc.KEY.space:cc.log("space"),this.punch=!0,t.playPunchAnimation();break;case cc.KEY.x:cc.log("x"),this.shoot=!0,t.playShootAnimation()}},onKeyReleased:function(e,n){switch(e){case cc.KEY.left:t.left=!1,t.moveBackground=0,t.playAnimation();break;case cc.KEY.right:t.right=!1,t.moveBackground=0,t.playAnimation();break;case cc.KEY.up:t.up=!1,t.playAnimation();break;case cc.KEY.down:t.down=!1,t.playAnimation();break;case cc.KEY.space:cc.log("space up")}}},t.node)},playAnimation:function(){this.playerDirection=this.node.getChildByName("NinjaAnimation").scaleX,this.left?this.animation.play("runLeftAnim_Ninja"):this.right?this.animation.play("runRightAnim_Ninja"):this.playerDirection==-1&&(this.up||this.down)?this.animation.play("runLeftAnim_Ninja"):1==this.playerDirection&&(this.up||this.down)?this.animation.play("runRightAnim_Ninja"):this.animation.play("standStillAnim_Ninja")},playPunchAnimation:function(){this.animation.play("punchAnim_Ninja")},playShootAnimation:function(){this.animation.play("shootAnim_Ninja"),this.animationShuriken.play("shurikenAnim_Ninja")},update:function(t){1==this.left?this.node.x>-400?this.node.x=this.node.x-this.playerTempo*t:this.moveBackground=1:1==this.right&&(this.node.x<400?this.node.x=this.node.x+this.playerTempo*t:this.moveBackground=-1),1==this.up&&this.node.y<-80?this.node.y=this.node.y+this.playerTempo/2*t:1==this.down&&this.node.y>-250&&(this.node.y=this.node.y-this.playerTempo/2*t)},doOtherStuff:function(){cc.log("JUST DO IT!")}}),cc._RFpop()},{}],PlayerScript:[function(t,e,n){"use strict";cc._RFpush(e,"58acc9ZSupDe7q81ov+Ipdc","PlayerScript"),cc.Class({"extends":cc.Component,properties:{playerTempo:0,animation:{"default":null,type:cc.Animation},bulletPrefab:{"default":null,type:cc.Prefab},playerType:"dummy"},onLoad:function(){var t=this;this.moveBackground=0,this.left=!1,this.right=!1,this.up=!1,this.down=!1,this.punch=!1,this.shoot=!1,this.dead=!1,this.won=!1,this.health=cc.sys.localStorage.characterHealth||100,this.strength=cc.sys.localStorage.characterStrenght||50,this.attackRadius=cc.sys.localStorage.characterAttackRadius||50,this.node.runAction(cc.sequence(cc.delayTime(2),cc.callFunc(function(){return t.setInputControl()}))),this.playerDirection=1},setInputControl:function(){var t=this;cc.eventManager.addListener({event:cc.EventListener.KEYBOARD,onKeyPressed:function(e,n){if(!(t.punch||t.shoot||t.dead||t.won))switch(e){case cc.KEY.left:t.moveBackground=0,t.right=!1,0==t.left&&(t.left=!0,t.playAnimation());break;case cc.KEY.right:t.moveBackground=0,t.left=!1,0==t.right&&(t.right=!0,t.playAnimation());break;case cc.KEY.up:0==t.up&&(t.up=!0,t.playAnimation());break;case cc.KEY.down:0==t.down&&(t.down=!0,t.playAnimation());break;case cc.KEY.space:t.punch=!0,t.playPunchAnimation();break;case cc.KEY.x:t.shoot=!0,t.playShootAnimation();break;case cc.KEY.p:t.killAllEnemies()}},onKeyReleased:function(e,n){switch(e){case cc.KEY.left:t.left=!1,t.moveBackground=0,t.playAnimation();break;case cc.KEY.right:t.right=!1,t.moveBackground=0,t.playAnimation();break;case cc.KEY.up:t.up=!1,t.playAnimation();break;case cc.KEY.down:t.down=!1,t.playAnimation();break;case cc.KEY.space:}}},t.node)},killAllEnemies:function(){cc.log("killAllEnemies");var t=this.node.getParent().getChildren();cc.log(t);for(var e=0;e<t.length;e++)t[e].getComponent("EnemyScript")&&(this.node.getParent().getChildren()[e].getComponent("EnemyScript").health=-1,cc.log(this.node.getParent().getChildren()[e].getComponent("EnemyScript").health))},playAnimation:function(){this.punch=!1,this.shoot=!1,this.playerDirection=this.node.getChildByName("PlayerAnimation").scaleX,this.left?this.animation.play("runLeftAnim_"+this.playerType):this.right?this.animation.play("runRightAnim_"+this.playerType):this.playerDirection==-1&&(this.up||this.down)?this.animation.play("runLeftAnim_"+this.playerType):1==this.playerDirection&&(this.up||this.down)?this.animation.play("runRightAnim_"+this.playerType):this.animation.play("standStillAnim_"+this.playerType)},playPunchAnimation:function(){this.animation.play("punchAnim_"+this.playerType)},playShootAnimation:function(){this.animation.play("shootAnim_"+this.playerType)},forwardAttackToStage:function(){this.node.getParent().getComponent("StageScript").attackEnemy()},forwardBulletAttackToStage:function(){var t=cc.instantiate(this.bulletPrefab);this.node.getParent().getComponent("StageScript").attackEnemyWithBullet(t)},update:function(t){1==this.left?this.node.x>-400?this.node.x=this.node.x-this.playerTempo*t:this.moveBackground=1:1==this.right&&(this.node.x<400||this.won?this.node.x=this.node.x+this.playerTempo*t:this.moveBackground=-1),1==this.up&&this.node.y<-80?this.node.y=this.node.y+this.playerTempo/2*t:1==this.down&&this.node.y>-250&&(this.node.y=this.node.y-this.playerTempo/2*t)},doOtherStuff:function(){},loseGame:function(){var t=this;this.node.runAction(cc.sequence(cc.callFunc(function(){t.animation.play("dieAnim_"+t.playerType),t.dead=!0}),cc.delayTime(.5),cc.callFunc(function(){return t.node.getChildByName("shadow").destroy()})))}}),cc._RFpop()},{}],StageScript:[function(t,e,n){"use strict";cc._RFpush(e,"f0a17j0llVLW4EWHddhGqL4","StageScript"),cc.Class({"extends":cc.Component,properties:{prefabEnemy:{"default":null,type:cc.Prefab},cowboy:{"default":null,type:cc.Prefab},ninja:{"default":null,type:cc.Prefab},knight:{"default":null,type:cc.Prefab},maximumEnemies:0,attackWaves:0,enemyStrengthFactor:0,background:{"default":null,type:cc.Node},winLoseLabel:{"default":null,type:cc.Label},profile:{"default":null,type:cc.Node},experienceBar:{"default":null,type:cc.Node},healthBar:{"default":null,type:cc.Node},strengthLabel:{"default":null,type:cc.Label},backgroundAudio:{"default":null,url:cc.AudioClip},winDistance:0,loseTimeout:0,selectedCharacter:0},spawnNewEnemy:function(){for(var t=-1,e=0;e<this.maximumEnemies;e++){e%(this.maximumEnemies/this.attackWaves)===0&&t++;var n=cc.instantiate(this.prefabEnemy);this.node.addChild(n),n.getComponent("EnemyScript").game=this,n.getComponent("EnemyScript").health*=this.enemyStrengthFactor,n.getComponent("EnemyScript").strength*=this.enemyStrengthFactor,n.setPosition(this.getNewEnemyPosition(t))}},getNewEnemyPosition:function(t){var e=500*cc.random0To1()*(t+1)+500+2e3*t,n=cc.random0To1()*-200-100;return cc.p(e,n)},onLoad:function(){var e=this;switch(this.changeScene=t("ChangeSceneScript"),this.changeScene.fadeIn(cc.director),this.wonFlag=0,this.loseFlag=0,this.wonPositionX=0,this.currentEnemies=0,this.timerBackgroundSound=(new Date).getTime(),cc.log("timerBackgroundSound "+this.timerBackgroundSound),cc.sys.localStorage.selectedCharacter||(cc.sys.localStorage={selectedCharacter:3,characterHealth:100,currentHealth:100,characterStrength:20,characterExperience:0,characterLevel:1,characterAttackRadius:50,stage:1}),this.remainingEnemies=[],this.localStorageObject=cc.sys.localStorage,this.selectedCharacter=parseInt(this.localStorageObject.selectedCharacter),this.currentHealth=parseInt(this.localStorageObject.currentHealth),this.characterExperience=parseInt(this.localStorageObject.characterExperience),this.profile._children[this.selectedCharacter-1].opacity=255,this.healthBar.getChildByName("ProgressBar")._components[1].progress=this.currentHealth/parseInt(this.localStorageObject.characterHealth),this.experienceBar.getChildByName("ProgressBar")._components[1].progress=this.characterExperience%100/100,this.strengthLabel.string=this.localStorageObject.characterStrength,this.player,this.selectedCharacter){case 1:this.player=cc.instantiate(this.cowboy);break;case 2:this.player=cc.instantiate(this.knight);break;case 3:this.player=cc.instantiate(this.ninja)}this.node.addChild(this.player),this.player.runAction(cc.sequence(cc.callFunc(function(){return e.player.setPosition(cc.p(-700,-200))}),cc.callFunc(function(){return e.player.getComponent("PlayerScript").animation.play("runRightAnim_"+e.player.getComponent("PlayerScript").playerType)}),cc.moveTo(2,cc.p(-300,-200)),cc.callFunc(function(){return e.player.getComponent("PlayerScript").animation.play("standStillAnim_"+e.player.getComponent("PlayerScript").playerType)}))),this.spawnNewEnemy()},moveEnemiesOnScreen:function(t,e,n){for(var i=this.node.getChildren(),a=0;a<i.length;a++)i[a].getComponent("EnemyScript")&&(i[a].x+=e*t*n)},updateBars:function(){this.healthBar.getChildByName("ProgressBar")._components[1].progress=this.currentHealth/parseInt(this.localStorageObject.characterHealth),this.experienceBar.getChildByName("ProgressBar")._components[1].progress=(this.maximumEnemies-this.remainingEnemies.length)/this.maximumEnemies},update:function(t){(new Date).getTime()>this.timerBackgroundSound&&(cc.audioEngine.playEffect(this.backgroundAudio,!1),this.timerBackgroundSound=(new Date).getTime(),this.timerBackgroundSound+=5e3+5e3*Math.random(),cc.log("timerBackgroundSound "+this.timerBackgroundSound));var e=this.player.getComponent("PlayerScript").moveBackground,n=this.player.getComponent("PlayerScript").playerTempo;0!==e&&(this.background.getComponent("BackgroundScript").moveBackgroundChildren(n,e,t),this.moveEnemiesOnScreen(n,e,t)),this.remainingEnemies=[];for(var i=0;i<this.node.getChildren().length;i++){var a=this.node.getChildren()[i];a.getComponent("EnemyScript")&&a.active&&this.remainingEnemies.push(a)}0===this.remainingEnemies.length&&0===this.wonFlag?(this.wonFlag=1,this.wonPositionX=this.background.getChildByName("SecondBackground").getChildByName("SecondBackgroundSprite1").x,this.writeMessage("You Won! Continue to the right for the next Stage >>>"),cc.sys.localStorage.currentHealth=this.currentHealth,cc.sys.localStorage.stage=parseInt(cc.sys.localStorage.stage)+1):1===this.wonFlag&&this.winGame(this.background.getChildByName("SecondBackground").getChildByName("SecondBackgroundSprite1").x,this.wonPositionX),this.currentHealth<=0&&0===this.loseFlag?this.loseFlag=1:1===this.loseFlag&&(this.loseFlag=2,this.loseGame()),this.updateBars()},writeMessage:function(t){this.winLoseLabel.string=t},attackEnemy:function(){for(var t=this.player.getChildByName("PlayerAnimation").scaleX,e=this.player.getPositionX(),n=this.player.getPositionY(),i=(this.player.getComponent("PlayerScript").strength,void 0),a=void 0,c=this.player.getComponent("PlayerScript").attackRadius,o=void 0,r=void 0,s=this.node.getChildren(),h=0;h<s.length;h++)(s[h].x-e>=0&&t>=0||s[h].x-e<0&&t<0)&&s[h].getComponent("EnemyScript")&&s[h].active&&(o?o>Math.abs(s[h].x-e)&&(o=Math.abs(s[h].x-e),r=h,i=s[r].x,a=s[r].y):(o=Math.abs(s[h].x-e),r=h,i=s[r].x,a=s[r].y));(i-e<=0&&t<=0||i-e>=0&&t>=0)&&Math.abs(a-n)<=100&&c>=Math.abs(i-e)&&(this.node.getChildren()[r].getComponent("EnemyScript").health-=this.player.getComponent("PlayerScript").strength,this.node.getChildren()[r].getComponent("EnemyScript").tumbleUntilTime=(new Date).getTime()+3e3,t<=0?this.node.getChildren()[r].runAction(cc.moveBy(.1,-100+100*cc.random0To1(),100*cc.randomMinus1To1())):this.node.getChildren()[r].runAction(cc.moveBy(.1,100+100*cc.random0To1(),100*cc.randomMinus1To1())))},attackEnemyWithBullet:function(t){for(var e=this,n=this.player.getChildByName("PlayerAnimation").scaleX,i=this.player.getPositionX(),a=this.player.getPositionY(),c=(this.player.getComponent("PlayerScript").strength,void 0),o=void 0,r=1e3,s=void 0,h=void 0,l=this.node.getChildren(),p=void 0,u=0;u<l.length;u++)l[u].getComponent("EnemyScript")&&l[u].active&&!l[u].getComponent("EnemyScript").isDead&&(l[u].x-i>=0&&n>=0||l[u].x-i<0&&n<0)&&(s?s>l[u].x-i&&(s=Math.abs(l[u].x-i),h=u,c=l[h].x,o=l[h].y,p=l[h].getComponent("EnemyScript").xSpeed):(s=Math.abs(l[u].x-i),h=u,c=l[h].x,o=l[h].y,p=l[h].getComponent("EnemyScript").xSpeed));if(c-i>=0&&n>=0&&this.node.getChildren()[h]&&!this.node.getChildren()[h].getComponent("EnemyScript").isDead){if(Math.abs(o-a)<=100&&r>=Math.abs(c-i)){this.node.addChild(t),t.setPosition(cc.p(this.player.x,this.player.y+10));var d=.001;"Cowboy"==this.player.getComponent("PlayerScript").playerType&&(n<0?t.setPosition(cc.p(this.player.x-45,this.player.y+8)):t.setPosition(cc.p(this.player.x+45,this.player.y+8))),d=5e-4,t.runAction(cc.sequence(cc.moveTo(d*s,c-p*d*s,o),cc.callFunc(function(){e.node.getChildren()[h]&&!e.node.getChildren()[h].getComponent("EnemyScript").isDead&&(e.node.getChildren()[h].getComponent("EnemyScript").health-=e.player.getComponent("PlayerScript").strength/2),t.destroy()})))}}else if(c-i<=0&&n<=0&&this.node.getChildren()[h]&&!this.node.getChildren()[h].getComponent("EnemyScript").isDead&&Math.abs(o-a)<=100&&r>=Math.abs(c-i)){this.node.addChild(t),t.setPosition(cc.p(this.player.x,this.player.y+10));var d=.001;"Cowboy"==this.player.getComponent("PlayerScript").playerType&&(n<0?t.setPosition(cc.p(this.player.x-45,this.player.y+8)):t.setPosition(cc.p(this.player.x+45,this.player.y+8))),d=5e-4,t.runAction(cc.sequence(cc.moveTo(d*s,c+p*d*s,o),cc.callFunc(function(){e.node.getChildren()[h]&&!e.node.getChildren()[h].getComponent("EnemyScript").isDead&&(e.node.getChildren()[h].getComponent("EnemyScript").health-=e.player.getComponent("PlayerScript").strength/2),t.destroy()})))}},winGame:function(t,e){var n=this;t<e-this.winDistance&&(this.wonFlag=2,this.player.runAction(cc.sequence(cc.callFunc(function(){return n.player.getComponent("PlayerScript").won=!0}),cc.callFunc(function(){parseInt(cc.sys.localStorage.stage)<=9?n.changeScene.loadScene(cc.director,"Stages/stage0"+cc.sys.localStorage.stage):n.changeScene.loadScene(cc.director,"01startMenu")}))))},loseGame:function(){var t=this;this.writeMessage("You lost. You will be returned to the Main Menu"),this.player.getComponent("PlayerScript").loseGame(),this.node.runAction(cc.sequence(cc.delayTime(this.loseTimeout),cc.callFunc(function(){t.changeScene.loadScene(cc.director,"01startMenu")})))}}),cc._RFpop()},{ChangeSceneScript:"ChangeSceneScript"}]},{},["01StartMenu","BossScript","BackgroundScript","PlayerScript","AnimationKnightScript","ChangeSceneScript","NinjaScript","EnemyAnimationScript","EnemyScript","02CharacterSelect","BossAnimationScript","CharacterSelectAnimationScript","KnightScript","AnimationScript","AnimationNinjaScript","StageScript"]);